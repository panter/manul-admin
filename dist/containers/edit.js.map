{"version":3,"sources":["../../src/containers/edit.js"],"names":["composer","onData","context","_id","params","docLoaded","doc","update","create","allowInsertWithId","upsert","depsMapper","collectionName","schema"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;;;AAEO,IAAMA,8BAAW,SAAXA,QAAW,OAQrBC,MARqB,EAQV;AAAA,MAPZC,OAOY,QAPZA,OAOY;AAAA,MANFC,GAME,QANZC,MAMY,CANFD,GAME;AAAA,MALZE,SAKY,QALZA,SAKY;AAAA,MAJZC,GAIY,QAJZA,GAIY;AAAA,MAHZC,MAGY,QAHZA,MAGY;AAAA,MAFZC,MAEY,QAFZA,MAEY;AAAA,MADZC,iBACY,QADZA,iBACY;;AACZ,MAAIJ,SAAJ,EAAe;AACb,QAAI,CAACC,GAAD,IAAQG,iBAAZ,EAA+B;AAC7BR,aAAO,IAAP,EAAa,EAAES,QAAQF,MAAV,EAAkBF,KAAK,EAAEH,QAAF,EAAvB,EAAb;AACD,KAFD,MAEO;AACLF,aAAO,IAAP,EAAa,EAAES,QAAQH,MAAV,EAAkBD,QAAlB,EAAb;AACD;AACF;AACF,CAhBM;;AAkBA,IAAMK,kCAAa,SAAbA,UAAa;AAAA,SAAY;AACpCT,aAAS;AAAA,aAAMA,QAAN;AAAA;AAD2B,GAAZ;AAAA,CAAnB;;kBAKQ,4BACb,yBAAQF,QAAR,CADa,EAEb,qCAAqB;AAAA,MAAGY,cAAH,SAAGA,cAAH;AAAA,SAAyB,EAAEC,QAAQD,cAAV,EAAzB;AAAA,CAArB,CAFa,EAGb,yBAAQD,UAAR,CAHa,EAIb,yCAAY,YAAZ,iBAJa,C","file":"edit.js","sourcesContent":["import { useDeps, composeAll, compose } from 'mantra-core';\nimport { withTranslatedSchema } from '@panter/manul-i18n';\nimport Edit from '../components/edit';\nimport fromContext from '../hocs/component_from_context_or';\n\nexport const composer = ({\n  context,\n  params: { _id },\n  docLoaded,\n  doc,\n  update,\n  create,\n  allowInsertWithId,\n}, onData) => {\n  if (docLoaded) {\n    if (!doc && allowInsertWithId) {\n      onData(null, { upsert: create, doc: { _id } });\n    } else {\n      onData(null, { upsert: update, doc });\n    }\n  }\n};\n\nexport const depsMapper = context => ({\n  context: () => context,\n});\n\n\nexport default composeAll(\n  compose(composer),\n  withTranslatedSchema(({ collectionName }) => ({ schema: collectionName })),\n  useDeps(depsMapper),\n)(fromContext('views.edit', Edit));\n"]}