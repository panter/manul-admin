{"version":3,"sources":["../src/create_admin_context.js"],"names":["Meteor","ValidatedMethod","LocalState","SimpleSchema","config","adminRoutes","components","gotoRoute","window","alert","routeName","neededMeteorPackages","Error","join","methods","getComponent","collectionName","type","Component","default","displayName","routeUtils","publicationUtils"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe,gBAgBT;AAAA,MAdJA,MAcI,QAdJA,MAcI;AAAA,MAbJC,eAaI,QAbJA,eAaI;AAAA,MAXJC,UAWI,QAXJA,UAWI;AAAA,MAVJC,YAUI,QAVJA,YAUI;AAAA,MARJC,MAQI,QARJA,MAQI;AAAA,MAPJC,WAOI,QAPJA,WAOI;AAAA,MANJC,UAMI,QANJA,UAMI;AAAA,4BAJJC,SAII;AAAA,MAJJA,SAII,kCAJQ;AAAA,WACVC,OAAOC,KAAP,2EAC0EC,SAD1E,CADU;AAAA,GAIR;;AACJ,8BAAeJ,UAAf;;AAEA,MAAMK,uBAAuB,EAAEX,cAAF,EAAUC,gCAAV,EAA2BC,sBAA3B,EAA7B;AACA,MAAI,oBAAOS,oBAAP,kBAAJ,EAA2C;AACzC,UAAM,IAAIC,KAAJ,2DACoD,oBACtDD,oBADsD,EAEtDE,IAFsD,CAEjD,IAFiD,CADpD,CAAN;AAKD;AACD,MAAMC,UAAU,8BACd,EAAEd,cAAF,EAAUG,0BAAV,EAAwBF,gCAAxB,EADc,EAEdG,MAFc,CAAhB;AAIA,MAAMW,eAAe,SAAfA,YAAe,QAA8B;AAAA,QAA3BC,cAA2B,SAA3BA,cAA2B;AAAA,QAAXC,IAAW,SAAXA,IAAW;;AACjD,QAAIC,YAAY,IAAhB;AACA,QAAI,0BAAaZ,WAAWW,IAAX,CAAb,CAAJ,EAAoC;AAClCC,kBAAYZ,WAAWW,IAAX,CAAZ;AACD,KAFD,MAEO,IAAI,mBAAMX,UAAN,EAAkB,CAACW,IAAD,EAAOD,cAAP,CAAlB,CAAJ,EAA+C;AACpDE,kBAAYZ,WAAWW,IAAX,EAAiBD,cAAjB,CAAZ;AACD,KAFM,MAEA;AACLE,kBAAYZ,WAAWW,IAAX,EAAiBE,OAA7B;AACD;AACDD,cAAUE,WAAV,cAAiCJ,cAAjC,SAAmDC,IAAnD;AACA,WAAOC,SAAP;AACD,GAXD;AAYA,SAAO;AACLlB,kBADK;AAELE,0BAFK;AAGLC,8BAHK;AAILW,oBAJK;AAKLC,8BALK;AAMLX,kBANK;AAOLC,4BAPK;AAQLE,wBARK;AASLD,0BATK;AAULe,qCAVK;AAWLC;AAXK,GAAP;AAaD,C","file":"create_admin_context.js","sourcesContent":["import _ from 'lodash';\n\nimport createMethods from './create_methods';\nimport defaultComponents from './default_components';\nimport publicationUtils from './utils/publication_utils';\nimport routeUtils from './utils/route_utils';\n\nexport default ({\n  // needed meteor dependencies\n  Meteor,\n  ValidatedMethod,\n\n  LocalState,\n  SimpleSchema,\n\n  config, // admin config\n  adminRoutes, // FlowRouter, manulRouter compatible routes\n  components, // component definition, see readme\n  /* eslint no-alert: 0*/\n  gotoRoute = routeName =>\n    window.alert(\n      `please provide a gotoRoute-function in adminContext that can jump to ${routeName}`\n    )\n}) => {\n  _.defaultsDeep(components, defaultComponents);\n\n  const neededMeteorPackages = { Meteor, ValidatedMethod, LocalState };\n  if (_.some(neededMeteorPackages, _.isNil)) {\n    throw new Error(\n      `please provide all of the following meteor-packages: ${_.keys(\n        neededMeteorPackages\n      ).join(', ')}`\n    );\n  }\n  const methods = createMethods(\n    { Meteor, SimpleSchema, ValidatedMethod },\n    config\n  );\n  const getComponent = ({ collectionName, type }) => {\n    let Component = null;\n    if (_.isFunction(components[type])) {\n      Component = components[type];\n    } else if (_.has(components, [type, collectionName])) {\n      Component = components[type][collectionName];\n    } else {\n      Component = components[type].default;\n    }\n    Component.displayName = `Admin_${collectionName}_${type}`;\n    return Component;\n  };\n  return {\n    Meteor,\n    LocalState,\n    SimpleSchema,\n    methods,\n    getComponent,\n    config,\n    adminRoutes,\n    gotoRoute,\n    components,\n    routeUtils,\n    publicationUtils\n  };\n};\n"]}