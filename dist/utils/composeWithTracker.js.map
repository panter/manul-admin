{"version":3,"sources":["../../src/utils/composeWithTracker.js"],"names":["composeWithTracker","myCompose","withRef","reactiveFn","L","E","options","onPropsChange","props","onData","context","trackerCleanup","handler","Tracker","nonreactive","autorun","stop"],"mappings":";;;;;kBAIwBA,kB;;AAJxB;;AAEA,IAAMC,YAAY,gCAAY,EAAEC,SAAS,KAAX,EAAZ,CAAlB;;AAEe,SAASF,kBAAT,CAA4BG,UAA5B,EAAwCC,CAAxC,EAA2CC,CAA3C,EAA8CC,OAA9C,EAAuD;AACpE,MAAMC,gBAAgB,SAAhBA,aAAgB,CAACC,KAAD,EAAQC,MAAR,EAAgBC,OAAhB,EAA4B;AAChD,QAAIC,uBAAJ;AACA,QAAMC,UAAUC,QAAQC,WAAR,CAAoB;AAAA,aAClCD,QAAQE,OAAR,CAAgB,YAAM;AACpBJ,yBAAiBR,WAAWK,KAAX,EAAkBC,MAAlB,EAA0BC,OAA1B,CAAjB;AACD,OAFD,CADkC;AAAA,KAApB,CAAhB;;AAMA,WAAO,YAAM;AACX,UAAI,OAAOC,cAAP,KAA0B,UAA9B,EAA0C;AACxCA;AACD;AACD,aAAOC,QAAQI,IAAR,EAAP;AACD,KALD;AAMD,GAdD;;AAgBA,SAAOf,UAAUM,aAAV,EAAyBH,CAAzB,EAA4BC,CAA5B,EAA+BC,OAA/B,CAAP;AACD","file":"composeWithTracker.js","sourcesContent":["import { setDefaults } from '@storybook/react-komposer';\n\nconst myCompose = setDefaults({ withRef: false });\n\nexport default function composeWithTracker(reactiveFn, L, E, options) {\n  const onPropsChange = (props, onData, context) => {\n    let trackerCleanup;\n    const handler = Tracker.nonreactive(() =>\n      Tracker.autorun(() => {\n        trackerCleanup = reactiveFn(props, onData, context);\n      })\n    );\n\n    return () => {\n      if (typeof trackerCleanup === 'function') {\n        trackerCleanup();\n      }\n      return handler.stop();\n    };\n  };\n\n  return myCompose(onPropsChange, L, E, options);\n}\n"]}