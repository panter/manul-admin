{"version":3,"sources":["../../src/utils/csv.js"],"names":["exportAsCsv","filename","keys","columnTitles","data","useBom","delimiter","quotes","nullValue","additionalProps","defaults","map","columns","dataPadded","entry","papaOptions","csv","unparse","fields","window","Blob","type"],"mappings":";;;;;;;;;;;;;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;;;;;AAYA,IAAMA,cAAc,SAAdA,WAAc,OAUb;AAAA,MATLC,QASK,QATLA,QASK;AAAA,MARLC,IAQK,QARLA,IAQK;AAAA,MAPLC,YAOK,QAPLA,YAOK;AAAA,MANLC,IAMK,QANLA,IAMK;AAAA,yBALLC,MAKK;AAAA,MALLA,MAKK,+BALI,KAKJ;AAAA,4BAJLC,SAIK;AAAA,MAJLA,SAIK,kCAJO,GAIP;AAAA,yBAHLC,MAGK;AAAA,MAHLA,MAGK,+BAHI,IAGJ;AAAA,4BAFLC,SAEK;AAAA,MAFLA,SAEK,kCAFO,MAEP;AAAA,MADFC,eACE;;AACL;AACA;AACA;AACA,MAAMC,WAAW,yBAAYR,IAAZ,EAAkBA,KAAKS,GAAL,CAAS;AAAA,WAAMH,SAAN;AAAA,GAAT,CAAlB,CAAjB;AACA,MAAMI,UAAUT,gBAAgBD,IAAhC;AACA,MAAMW,aAAaT,KAAKO,GAAL,CAAS;AAAA,WAAU,mCAAcD,QAAd,EAA2BI,KAA3B,EAAV;AAAA,GAAT,CAAnB;AACA,MAAMC,yBAAgBT,oBAAhB,EAA2BC,cAA3B,IAAsCE,eAAtC,CAAN;AACA,MAAMO,MAAM,oBAAKC,OAAL,CAAa,EAAEC,QAAQN,OAAV,EAAmBR,MAAMS,UAAzB,EAAb,EAAoDE,WAApD,CAAZ;AACA,yBAAO,IAAII,OAAOC,IAAX,CAAgB,CAACJ,GAAD,CAAhB,EAAuB,EAAEK,MAAM,0BAAR,EAAvB,CAAP,EAAwEpB,QAAxE,WAAwFI,MAAxF;AACD,CApBD;;kBAsBe,EAAEL,wBAAF,E","file":"csv.js","sourcesContent":["import _ from 'lodash';\nimport Papa from 'papaparse';\nimport { saveAs } from 'file-saver';\n\n/**\ncreate a csv-file in the browser from the given data\n\ndata: Array of documents\nkeys: all keys of every document that should be included\nfilename: the filename of the resulting csv-file\ncolumnTitles: the column titles on the first row\nuseBom: whether to include a UTF-16 byte order mark\ndelimiter: the delimiter for the csv\nquotes: whether to add quotes around fields\nany additional property will be passed to papaparse, see http://papaparse.com/docs#json-to-csv\n**/\nconst exportAsCsv = ({\n  filename,\n  keys,\n  columnTitles,\n  data,\n  useBom = false,\n  delimiter = ';',\n  quotes = true,\n  nullValue = 'NULL',\n  ...additionalProps\n }) => {\n  // we encode missing values with \"NULL\"\n  // because CSV has no concept of null/missing values\n  // good read: http://www.garretwilson.com/blog/2009/04/23/csvnull.xhtml\n  const defaults = _.zipObject(keys, keys.map(() => nullValue));\n  const columns = columnTitles || keys;\n  const dataPadded = data.map(entry => (_.values({ ...defaults, ...entry })));\n  const papaOptions = { delimiter, quotes, ...additionalProps };\n  const csv = Papa.unparse({ fields: columns, data: dataPadded }, papaOptions);\n  saveAs(new window.Blob([csv], { type: 'text/plain;charset=utf-8' }), `${filename}.csv`, useBom);\n};\n\nexport default { exportAsCsv };\n"]}