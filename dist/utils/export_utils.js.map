{"version":3,"sources":["../../src/utils/export_utils.js"],"names":["getTransform","isEmptyObject","field","removeEmptyObjects","doc","transform","getExportSet","data","allDocs","keysSet","forEach","entry","add","key","keys","values"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAYA,IAAMA,eAAe,SAAfA,YAAe,GAAM;AACzB,MAAMC,gBAAgB,SAAhBA,aAAgB;AAAA,WACpB,wBAASC,KAAT,KAAmB,CAAC,sBAAOA,KAAP,CAApB,IAAqC,uBAAQA,KAAR,CADjB;AAAA,GAAtB;;AAGA,MAAMC,qBAAqB,SAArBA,kBAAqB;AAAA,WAAO,sBAAOF,aAAP,EAAsBG,GAAtB,CAAP;AAAA,GAA3B;;AAEA,MAAMC,YAAY,oBAChB,kCADgB,EAEhB,mBAAIF,kBAAJ,CAFgB,CAAlB;;AAKA,SAAOE,SAAP;AACD,CAZD;AAaA;AACO,IAAMC,sCAAe,SAAfA,YAAe,UAAW;AACrC,MAAMD,YAAYL,cAAlB;AACA,MAAMO,OAAOF,UAAUG,OAAV,CAAb;;AAEA,MAAMC,UAAU,mBAAhB;AACAF,OAAKG,OAAL,CAAa;AAAA,WAAS,oBAAWC,KAAX,EAAkBD,OAAlB,CAA0B;AAAA,aAAOD,QAAQG,GAAR,CAAYC,GAAZ,CAAP;AAAA,KAA1B,CAAT;AAAA,GAAb;AACA,MAAMC,kDAAWL,QAAQM,MAAR,EAAX,EAAN;;AAEA,SAAO,EAAER,UAAF,EAAQO,UAAR,EAAP;AACD,CATM","file":"export_utils.js","sourcesContent":["import flat from 'flat';\n\nimport {\n  isObject,\n  isDate,\n  isEmpty,\n  omitBy,\n  flow,\n  keys as lodashKeys,\n  map\n} from 'lodash/fp';\n\nconst getTransform = () => {\n  const isEmptyObject = field =>\n    isObject(field) && !isDate(field) && isEmpty(field);\n\n  const removeEmptyObjects = doc => omitBy(isEmptyObject, doc);\n\n  const transform = flow(\n    map(flat),\n    map(removeEmptyObjects)\n  );\n\n  return transform;\n};\n/* eslint import/prefer-default-export: 0*/\nexport const getExportSet = allDocs => {\n  const transform = getTransform();\n  const data = transform(allDocs);\n\n  const keysSet = new Set();\n  data.forEach(entry => lodashKeys(entry).forEach(key => keysSet.add(key)));\n  const keys = [...keysSet.values()];\n\n  return { data, keys };\n};\n"]}